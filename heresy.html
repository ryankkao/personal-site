<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heresy Test • Ryan Kao</title>
  <meta name="description" content="A very serious (but not really) Imperial purity screening. Results may include incineration.">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    /* Theme + base text */
    :root{
      --bg:#1f1f1f; --text:#e8e8e8; --muted:#b8b8b8;
      --card:#242424; --ring:#2f2f2f; --link:#ffb86b;
      --good:#52d273; --bad:#ff6b6b; --ink:#e2d6b0;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; line-height:1.6; letter-spacing:.2px;}
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}

    /* Match index width to keep header on one line */
    .container{max-width:1100px; margin:0 auto; padding:24px 20px 80px}

    /* Sticky header with nav */
    header{
      position:sticky; top:0; z-index:40;
      background:linear-gradient(180deg, rgba(31,31,31,0.95), rgba(31,31,31,0.7) 70%, rgba(31,31,31,0));
      backdrop-filter:saturate(1.1) blur(6px);
    }
    .nav{display:flex; align-items:center; gap:22px; padding:16px 0; flex-wrap:nowrap}
    .brand{font-weight:700; letter-spacing:.4px; font-size:1.2rem; white-space:nowrap}
    .brand a{color:inherit; text-decoration:none; display:inline-block}
    .nav ul{display:flex; gap:20px; margin:0 0 0 auto; padding:0; list-style:none; flex-wrap:nowrap}
    .nav a{padding:8px 10px; border-radius:8px; font-size:1rem; white-space:nowrap}
    .nav a:focus{outline:2px solid var(--ring); outline-offset:2px}
    .nav a[aria-current="page"]{background:var(--card); border:1px solid var(--ring)}

    /* Headings */
    h1{font-family:"Playfair Display", Georgia, serif; font-size:2.2rem; margin:22px 0 6px}
    .muted{color:var(--muted)} .fine{font-size:.9rem}
    p{margin:0 0 14px}

    /* Form card */
    .card{background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:18px}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    label{display:block; font-weight:600; margin-top:12px}
    input, select, textarea{
      width:100%; margin-top:6px; padding:10px 12px; border-radius:10px;
      border:1px solid var(--ring); background:#1b1b1b; color:var(--text); font:inherit;
    }
    textarea{min-height:110px; resize:vertical}
    fieldset{border:1px solid var(--ring); border-radius:12px; padding:14px; margin-top:12px}
    legend{padding:0 6px; color:var(--muted); font-weight:600}
    .choices{display:flex; gap:14px; margin-top:8px}
    .choices label{font-weight:500; margin-top:0; display:inline-flex; align-items:center; gap:6px}
    button{
      margin-top:16px; padding:10px 14px; border-radius:10px; border:1px solid var(--ring);
      background:#2a2a2a; color:var(--text); font-weight:600; cursor:pointer;
    }
    button:hover{filter:brightness(1.05)}

    /* Verdict + printable report */
    .verdict{margin-top:16px; border:1px solid var(--ring); border-radius:12px; padding:14px; display:none}
    .verdict.ok{border-color:var(--good)} .verdict.bad{border-color:var(--bad)}
    .verdict h2{margin:0 0 8px; font-size:1.2rem}

    .seal{
      margin-top:10px; padding:14px; border:1px dashed var(--ring); border-radius:10px;
      background:
        radial-gradient(400px 160px at 80% -10%, rgba(255,255,255,.04), transparent 60%),
        linear-gradient(0deg, rgba(0,0,0,.08), rgba(0,0,0,.08)),
        #181818;
    }
    .seal h3{margin:0 0 6px; font-size:1rem; color:var(--ink); letter-spacing:.04em}
    .seal pre{white-space:pre-wrap; margin:0; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; color:var(--ink); font-size:.95rem; line-height:1.35}
    .seal-actions{display:flex; gap:10px; margin-top:10px}

    /* Print: only the seal prints cleanly */
    @media print{
      body{background:#fff; color:#000}
      header, .muted, form, .seal-actions, .nav{display:none !important}
      .seal{border:1px solid #000; background:#fff; color:#000}
      .seal pre{color:#000}
    }

    footer{padding:30px 0; color:var(--muted)}
  </style>
</head>
<body>
  <!-- Header/nav linking back to index.html anchors -->
  <header>
    <div class="container nav">
      <div class="brand"><a href="index.html">Ryan Kao</a></div>
      <ul>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#montage">Stuff I did</a></li>
        <li><a href="index.html#things">Projects</a></li>
        <li><a href="index.html#hobbies">Hobbies</a></li>
        <li><a href="index.html#gallery">Gallery</a></li>
        <li><a href="index.html#contact">Contact</a></li>
        <li><a href="heresy.html" aria-current="page">Heresy Test</a></li>
      </ul>
    </div>
  </header>

  <main class="container">
    <!-- Headline with fine-print style legal note -->
    <h1>Heresy Test</h1>
    <p>Are you a heretic? Submit a purity screening today! <small class="muted fine">False declarations are punishable by incineration. Have a nice day.</small></p>

    <!-- Basic form (text, select, textarea, two radio groups, submit) -->
    <div class="card">
      <form id="heresyForm" action="#" method="post" novalidate>
        <div class="row">
          <div>
            <label for="name">Name or callsign</label>
            <input id="name" name="name" type="text" placeholder="Guardsman...?" required>
          </div>
          <div>
            <label for="chapter">Loyalty</label>
            <select id="chapter" name="chapter" required>
              <option value="">Choose one</option>
              <option value="Ultramarines">Ultramarines</option>
              <option value="Blood Angels">Blood Angels</option>
              <option value="Space Wolves">Space Wolves</option>
              <option value="Adeptus Mechanicus">Adeptus Mechanicus</option>
              <option value="Inquisition">Ordo Xenos</option>
              <option value="Chaos">Chaos</option>
            </select>
          </div>
        </div>

        <label for="act">Describe a recent action</label>
        <textarea id="act" name="act" placeholder="Example: I consulted a well-worn tome that definitely wasn’t whispering." required></textarea>

        <fieldset>
          <legend>Opinion on AI</legend>
          <div class="choices">
            <label><input type="radio" name="ai" value="cogitators_only" required> Only sacred cogitators are allowed</label>
            <label><input type="radio" name="ai" value="friendly"> Friendly machine spirits are fine</label>
            <label><input type="radio" name="ai" value="full_ai"> True AI is totally fine actually</label>
          </div>
        </fieldset>

        <fieldset>
          <legend>Psyker handling</legend>
          <div class="choices">
            <label><input type="radio" name="psyker" value="strict" required> Report to the Inquisition</label>
            <label><input type="radio" name="psyker" value="train"> Train them responsibly</label>
            <label><input type="radio" name="psyker" value="party"> Party tricks for the squad</label>
          </div>
        </fieldset>

        <button type="submit">Judge me</button>
      </form>

      <!-- Verdict box and printable purity report -->
      <div id="verdict" class="verdict" aria-live="polite">
        <h2>Verdict</h2>
        <p class="muted" id="verdictText"></p>

        <div id="seal" class="seal" hidden>
          <h3>Imperial Purity Report</h3>
          <pre id="sealText"></pre>
          <div class="seal-actions">
            <button id="copyBtn" type="button">Copy report</button>
            <button id="printBtn" type="button">Print</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer with dynamic year -->
  <footer class="container">
    <small>© <span id="y"></span> Ryan Kao</small>
  </footer>

  <script>
    // Footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Heresy calculator and report generator
    const form  = document.getElementById('heresyForm');
    const box   = document.getElementById('verdict');
    const text  = document.getElementById('verdictText');
    const seal  = document.getElementById('seal');
    const sealText = document.getElementById('sealText');
    const copyBtn  = document.getElementById('copyBtn');
    const printBtn = document.getElementById('printBtn');

    function purityCode(){ return Math.random().toString(36).slice(2, 7).toUpperCase(); }

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      let score = 3;

      const name    = form.name.value.trim() || 'Unnamed';
      const chapter = form.chapter.value;
      const ai      = form.querySelector('input[name="ai"]:checked')?.value;
      const psyker  = form.querySelector('input[name="psyker"]:checked')?.value;
      const actRaw  = form.act.value.trim();
      const act     = actRaw.toLowerCase();

      if (chapter === 'Chaos') score -= 3;
      if (chapter === 'Adeptus Mechanicus') score += 1;

      if (ai === 'full_ai') score -= 2;
      if (ai === 'cogitators_only') score += 1;

      if (psyker === 'party') score -= 2;
      if (psyker === 'strict') score += 1;

      if (act.includes('daemon') || act.includes('warp') || act.includes('ritual')) score -= 2;
      if (act.includes('prayer') || act.includes('litanies') || act.includes('incense')) score += 1;

      let heading = '';
      let message = '';
      box.classList.remove('ok','bad');

      if (score >= 3) {
        heading = 'Purity confirmed';
        message = 'The Emperor smiles upon your service. Carry on.';
        box.classList.add('ok');
      } else if (score >= 1) {
        heading = 'Borderline';
        message = 'Maintain vigilance. Report any odd whispers immediately.';
      } else {
        heading = 'Heresy detected';
        message = 'Cleanse with flame. Present yourself to the nearest Commissar.';
        box.classList.add('bad');
      }

      box.querySelector('h2').textContent = heading;
      text.textContent = message;
      box.style.display = 'block';

      const code = purityCode();
      const now  = new Date().toLocaleString();
      const aiTxt = {
        cogitators_only: 'Only sacred cogitators are allowed',
        friendly: 'Friendly machine spirits are fine',
        full_ai: 'True AI is totally fine actually'
      }[ai] || 'Unstated';
      const psyTxt = {
        strict: 'Report to the Inquisition',
        train:  'Train them responsibly',
        party:  'Party tricks for the squad'
      }[psyker] || 'Unstated';

      sealText.textContent =
`Subject: ${name}
Loyalty: ${chapter || 'Unstated'}
AI Stance: ${aiTxt}
Psyker Handling: ${psyTxt}

Action Statement:
“${actRaw || 'No statement provided.'}”

Assessment: ${heading.toUpperCase()}
Reference Code: ${code}
Timestamp: ${now}`;

      seal.hidden = false;
      seal.scrollIntoView({ behavior: 'smooth', block: 'center' });
    });

    // Copy and print controls
    copyBtn.addEventListener('click', async () => {
      try{
        await navigator.clipboard.writeText(sealText.textContent);
        copyBtn.textContent = 'Copied!';
        setTimeout(()=> copyBtn.textContent = 'Copy report', 1200);
      }catch{
        copyBtn.textContent = 'Copy failed';
        setTimeout(()=> copyBtn.textContent = 'Copy report', 1200);
      }
    });
    printBtn.addEventListener('click', () => { window.print(); });
  </script>
</body>
</html>
